alias: "Gefriertruhe: Eintrag anlegen & ID erh√∂hen"
mode: single
fields:
  speise:
    name: Speise
    description: Einzutragende Speise (To-do-Item-Text)
    example: Rindsgulasch (2 Portionen)
    selector:
      text: {}
sequence:
  - variables:
      id_num: "{{ states('input_number.eingefroren_id') | int }}"
      speise: "{{ speise | default(states('input_select.speisen')) }}"
      heute_str: "{{ now().strftime('%d.%m.%Y') }}"
      due_date: "{{ (now() + timedelta(days=120)).date().isoformat() }}"
  - action: todo.add_item
    target:
      entity_id:
        - todo.gefriertruhe_2
    data:
      item: "{{ speise }}"
      description: "{{ id_num }} (eingefroren am {{ heute_str }})"
      due_date: "{{ due_date }}"
  - action: input_number.increment
    target:
      entity_id: input_number.eingefroren_id
    data: {}
description: ""
